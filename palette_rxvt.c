#include "palette.h"

#include <lcms2.h>

#define COUNT 16

static const uint8_t const palette_srgb[COUNT * 3] = {
	0x00, 0x00, 0x00,
	0xcd, 0x00, 0x00,
	0x00, 0xcd, 0x00,
	0xcd, 0xcd, 0x00,
	0x00, 0x00, 0xcd,
	0xcd, 0x00, 0xcd,
	0x00, 0xcd, 0xcd,
	0xe5, 0xe5, 0xe5,
	0x40, 0x40, 0x40,
	0xff, 0x00, 0x00,
	0x00, 0xff, 0x00,
	0xff, 0xff, 0x00,
	0x00, 0x00, 0xff,
	0xff, 0x00, 0xff,
	0x00, 0xff, 0xff,
	0xff, 0xff, 0xff
};

static const cmsCIELab *palette = NULL;

static const cmsCIELab *get_palette(void) {
	if (palette == NULL) {
		palette = palette_convert_srgb_lab(palette_srgb, COUNT);
	}
	return palette;
}

struct palette palette_rxvt = {
	.name = "rxvt",
	.fg_count = COUNT,
	.bg_count = COUNT,
	.fg_palette = get_palette,
	.bg_palette = get_palette,
	.escape_len = PALETTE_CODE_16COLOR_LEN,
	.code = palette_code_16color,
	.reset = palette_reset
};

